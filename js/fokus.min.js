/*!
 * Fokus 0.5
 * http://lab.hakim.se/fokus
 * MIT licensed
 *
 * Copyright (C) 2012 Hakim El Hattab, http://hakim.se
 */
(function(){var f=5;var t=0.75;
var d=null;var y,x,v=0,o,b={left:0,top:0,right:0,bottom:0},h={left:0,top:0,right:0,bottom:0},p={ctrl:false,shift:false,alt:false,cmd:false};function c(){if(k()&&!window.__fokused){window.__fokused=true;
y=document.createElement("canvas");x=y.getContext("2d");y.style.position="fixed";y.style.left=0;y.style.top=0;y.style.zIndex=2147483647;y.style.pointerEvents="none";
document.addEventListener("mousedown",m,false);document.addEventListener("keyup",r,false);document.addEventListener("keydown",r,false);document.addEventListener("scroll",l,false);
document.addEventListener("DOMMouseScroll",l,false);window.addEventListener("resize",e,false);e();}}function k(){return !!("addEventListener" in document&&"pointerEvents" in document.body.style);
}function u(){var z=w();x.clearRect(0,0,y.width,y.height);x.fillStyle="rgba( 0, 0, 0, "+v+" )";x.fillRect(0,0,y.width,y.height);if(z){if(v<0.1){h=b;}else{h.left+=(b.left-h.left)*0.18;
h.top+=(b.top-h.top)*0.18;h.right+=(b.right-h.right)*0.18;h.bottom+=(b.bottom-h.bottom)*0.18;}}x.clearRect(h.left-window.scrollX-f,h.top-window.scrollY-f,(h.right-h.left)+(f*2),(h.bottom-h.top)+(f*2));
if(z){v+=(t-v)*0.08;}else{v=Math.max((v*0.85)-0.02,0);}cancelAnimationFrame(o);if(z||v>0){if(!y.parentNode){document.body.appendChild(y);}o=requestAnimationFrame(u);
}else{document.body.removeChild(y);}}function s(A){var C={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:0,bottom:0};var z=n();for(var D=0,G=z.length;
D<G;D++){var B=z[D];if(B.nodeName==="#text"&&B.nodeValue.trim()){B=B.parentNode;}var F=a(B);var I=F.x,H=F.y,J=B.offsetWidth,E=B.offsetHeight;if(B&&typeof I==="number"&&typeof J==="number"&&(J>0||E>0)&&!B.nodeName.match(/^br$/gi)){C.left=Math.min(C.left,I);
C.top=Math.min(C.top,H);C.right=Math.max(C.right,I+J);C.bottom=Math.max(C.bottom,H+E);}}if(!d||d==="none"||p[d]||w()){b=C;}if(A){h=b;}if(w()){u();}}function w(){return b.left<b.right&&b.top<b.bottom;
}function m(z){if(z.which!==3){document.addEventListener("mousemove",q,false);document.addEventListener("mouseup",i,false);s();}}function q(z){s();}function i(z){document.removeEventListener("mousemove",q,false);
document.removeEventListener("mouseup",i,false);setTimeout(s,1);}function r(z){p.alt=z.altKey||z.altGraphKey;p.ctrl=z.ctrlKey;p.shift=z.shiftKey;p.meta=z.metaKey;
s();}function l(z){s(true);}function e(z){y.width=window.innerWidth;y.height=window.innerHeight;}function n(){if(window.getSelection){var z=window.getSelection();
if(!z.isCollapsed){return j(z.getRangeAt(0));}}return[];}function j(A){var B=A.startContainer;var z=A.endContainer;if(B==z){if(B.nodeName==="#text"){return[B.parentNode];
}return[B];}var C=[];while(B&&B!=z){C.push(B=g(B));}B=A.startContainer;while(B&&B!=A.commonAncestorContainer){C.unshift(B);B=B.parentNode;}return C;}function g(z){if(z.hasChildNodes()){return z.firstChild;
}else{while(z&&!z.nextSibling){z=z.parentNode;}if(!z){return null;}return z.nextSibling;}}function a(A){var z=document.documentElement.offsetLeft,B=document.documentElement.offsetTop;
if(A.offsetParent){do{z+=A.offsetLeft;B+=A.offsetTop;}while(A=A.offsetParent);}return{x:z,y:B};}(function(){var A=0;var B=["ms","moz","webkit","o"];for(var z=0;
z<B.length&&!window.requestAnimationFrame;++z){window.requestAnimationFrame=window[B[z]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[B[z]+"CancelAnimationFrame"]||window[B[z]+"CancelRequestAnimationFrame"];
}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(G,D){var C=new Date().getTime();var E=Math.max(0,16-(C-A));var F=window.setTimeout(function(){G(C+E);
},E);A=C+E;return F;};}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(C){clearTimeout(C);};}}());c();})();