/*!
 * Fokus 0.1
 * http://lab.hakim.se/fokus
 * MIT licensed
 *
 * Copyright (C) 2011-2012 Hakim El Hattab, http://hakim.se
 */
(function(){var d=5;var p=0.75;
var u,t,r=0,m,h={left:0,top:0,right:0,bottom:0},f={left:0,top:0,right:0,bottom:0};function b(){if(j()&&!window.__fokused){window.__fokused=true;u=document.createElement("canvas");
t=u.getContext("2d");u.style.position="fixed";u.style.left=0;u.style.top=0;u.style.zIndex=2147483647;u.style.pointerEvents="none";document.addEventListener("mousedown",k,false);
window.addEventListener("resize",c,false);c();}}function j(){return !!("addEventListener" in document&&"pointerEvents" in document.body.style);}function q(){t.clearRect(0,0,u.width,u.height);
t.fillStyle="rgba( 0, 0, 0, "+r+" )";t.fillRect(0,0,u.width,u.height);t.clearRect(f.left-window.scrollX-d,f.top-window.scrollY-d,(f.right-f.left)+(d*2),(f.bottom-f.top)+(d*2));
if(s()){r+=(p-r)*0.08;}else{r=Math.max((r*0.85)-0.02,0);}if(s()||r>0){if(!u.parentNode){document.body.appendChild(u);}cancelAnimationFrame(m);m=requestAnimationFrame(q);
}else{document.body.removeChild(u);}}function o(){h={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:0,bottom:0};var v=l();for(var A=0,D=v.length;A<D;
A++){var z=v[A];if(z.nodeName==="#text"&&z.nodeValue.trim()){z=z.parentNode;}var C=a(z);var F=C.x,E=C.y,G=z.offsetWidth,B=z.offsetHeight;if(z&&typeof F==="number"&&typeof G==="number"){h.left=Math.min(h.left,F);
h.top=Math.min(h.top,E);h.right=Math.max(h.right,F+G);h.bottom=Math.max(h.bottom,E+B);}}if(s()){f=h;q();}}function s(){return h.left<h.right&&h.top<h.bottom;
}function k(v){document.addEventListener("mousemove",n,false);document.addEventListener("mouseup",g,false);o();}function n(v){o();}function g(v){document.removeEventListener("mousemove",n,false);
document.removeEventListener("mouseup",g,false);setTimeout(o,1);}function c(v){u.width=window.innerWidth;u.height=window.innerHeight;}function l(){if(window.getSelection){var v=window.getSelection();
if(!v.isCollapsed){return i(v.getRangeAt(0));}}return[];}function i(w){var x=w.startContainer;var v=w.endContainer;if(x==v){if(x.nodeName==="#text"){return[x.parentNode];
}return[x];}var y=[];while(x&&x!=v){y.push(x=e(x));}x=w.startContainer;while(x&&x!=w.commonAncestorContainer){y.unshift(x);x=x.parentNode;}return y;}function e(v){if(v.hasChildNodes()){return v.firstChild;
}else{while(v&&!v.nextSibling){v=v.parentNode;}if(!v){return null;}return v.nextSibling;}}function a(w){var v=0,z=0;if(w.offsetParent){do{v+=w.offsetLeft;
z+=w.offsetTop;}while(w=w.offsetParent);}return{x:v,y:z};}(function(){var w=0;var y=["ms","moz","webkit","o"];for(var v=0;v<y.length&&!window.requestAnimationFrame;
++v){window.requestAnimationFrame=window[y[v]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[y[v]+"CancelAnimationFrame"]||window[y[v]+"CancelRequestAnimationFrame"];
}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(C,z){var x=new Date().getTime();var A=Math.max(0,16-(x-w));var B=window.setTimeout(function(){C(x+A);
},A);w=x+A;return B;};}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(x){clearTimeout(x);};}}());b();})();